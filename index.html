<!DOCTYPE html>

<html lang="zh-TW"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> <meta name="apple-mobile-web-app-capable" content="yes"> <title>2026 é¦™æ¸¯-æ¾³é–€ æ‘˜æ˜Ÿé£Ÿæ—… (å¤©æ°£å„ªåŒ–ç‰ˆ)</title> <style> :root{--primary:#D35400;--accent:#E67E22;--bg:#F5F6FA;--card:#FFFFFF;--text:#2D3436;--sub:#636E72;--sunq:#16A34A;--jr:#DC2626;--dazaifu:#7C3AED;} @media (prefers-color-scheme: dark){:root{--bg:#1a1a1a;--card:#2d2d2d;--text:#ecf0f1;--sub:#bdc3c7;}} *{margin:0;padding:0;box-sizing:border-box;} body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;background:var(--bg);color:var(--text);padding-bottom:80px;line-height:1.5;}

    /* ä¸Šæ–¹ç¥¨åˆ¸åˆ— */
    .pass-bar{
        position:fixed;top:0;left:0;right:0;
        background:rgba(0,0,0,0.93);backdrop-filter:blur(15px);
        color:white;z-index:9999;
        padding:10px 12px;
        padding-top:max(env(safe-area-inset-top),22px);
        display:flex;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        flex-wrap: nowrap;
        justify-content: center;
        gap:10px;
    }
    .pass-tag{
        flex-shrink: 0; 
        min-width:98px;max-width:145px;
        padding:12px 10px;border-radius:18px;
        font-size:13px;font-weight:700;text-align:center;line-height:1.3;
        box-shadow:0 3px 10px rgba(0,0,0,0.4);
        transition:all .25s;cursor:pointer;
    }
    .pass-tag:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(0,0,0,0.5);}
    .pass-tag.sunq{background:var(--sunq);}
    .pass-tag.jr{background:var(--jr);}
    .pass-tag.dazaifu{background:var(--dazaifu);}
    .pass-tag.vjw{background:#2E86C1;}
    .pass-tag.emergency{background:#e74c3c;}
    .pass-tag.weather{background:#34495e;}

    /* æ‰‹æ©Ÿç‰ˆèª¿æ•´ */
    @media (max-width:520px){
        .pass-bar{
            gap:8px;padding:8px 10px;padding-top:max(env(safe-area-inset-top),18px);
            justify-content: flex-start;
        }
        .pass-tag{font-size:12.5px;padding:10px 8px;min-width:80px;}
        header{margin-top:calc(env(safe-area-inset-top) + 85px);}
    }

    header{
        background:linear-gradient(135deg,var(--primary),var(--accent));
        color:white;padding:24px 20px;text-align:center;
        margin-top:calc(env(safe-area-inset-top) + 85px);
    }
    h1{font-size:25px;font-weight:800;margin:0;}
    .subtitle{font-size:15px;opacity:0.95;margin-top:6px;}

    /* FAB */
    .fab{
        position:fixed;bottom:max(22px,env(safe-area-inset-bottom));right:22px;
        background:var(--primary);color:white;
        width:58px;height:58px;border-radius:50%;
        display:flex;align-items:center;justify-content:center;
        box-shadow:0 5px 18px rgba(0,0,0,0.35);z-index:998;cursor:pointer;
        opacity:0;visibility:hidden;
        transition:all .4s cubic-bezier(0.4,0,0.2,1);
    }
    .fab.show{opacity:1;visibility:visible;}
    .fab:hover{transform:translateY(-6px);box-shadow:0 12px 28px rgba(211,84,0,0.5);}
    .fab svg{stroke:white;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;width:34px;height:34px;}

    /* Modal */
    .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:1000;justify-content:center;align-items:center;}
    .modal-content{background:var(--card);margin:20px;padding:24px;border-radius:16px;max-width:90%;max-height:85%;overflow-y:auto;box-shadow:0 12px 40px rgba(0,0,0,0.35);position:relative;text-align:center;}
    .close{position:absolute;top:8px;right:15px;font-size:32px;color:var(--sub);cursor:pointer;}

    #vjw-modal img {
        max-width: 250px;
        width: 85%;
        height: auto;
        margin: 15px auto;
        display: block;
        border: 4px solid var(--card);
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    /* Timeline */
    .container{max-width:600px;margin:0 auto;padding:0 15px;}
    .day-group{margin:20px 0;}
    .day-header{background:var(--card);padding:16px;border-radius:14px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 3px 10px rgba(0,0,0,0.09);cursor:pointer;border-left:6px solid var(--primary);user-select:none;}
    .day-title{font-weight:bold;font-size:16.5px;}
    .toggle{font-size:24px;transition:transform .3s;}
    .active .toggle {transform: rotate(180deg);}
    .spots {display: none; padding-left: 14px;
    border-left: 2px solid #ddd; margin-left: 15px; margin-top: 12px;}
    .active .spots {display: block;}

    .spot {background: var(--card); margin: 14px 0 14px 16px; padding: 15px;
    border-radius: 14px; position: relative; box-shadow: 0 3px 8px rgba(0,0,0,0.07);}
    .spot::before {content: ''; position: absolute; left: -22px; top: 20px; width: 11px;
    height: 11px; border-radius: 50%; background: var(--sub); border: 2.5px solid var(--bg);}
    .spot.sunq::before {background: var(--sunq);}
    .spot.jr::before {background: var(--jr);}
    .spot.dazaifu::before {background: var(--dazaifu);}
    .spot.exchange::before {background: #f1c40f; border-color: #f39c12;}

    .time {background: var(--card); color: var(--sub);
    padding: 4px 10px; border-radius: 6px; font-size: 11.5px; font-weight: 600; margin-bottom: 7px; display: inline-block;}
    .title {font-size: 16.5px; font-weight: 600; display: flex;
    align-items: center; justify-content: space-between;}
    .check {width: 21px; height: 21px; border: 2.5px solid #ccc; border-radius: 50%; margin-right: 11px; cursor: pointer;
    flex-shrink: 0;}
    .done .check {background: var(--primary); border-color: var(--primary); position: relative;}
    .done .check::after {content: 'âœ“'; color: white; font-size: 13px; position: absolute; top: 50%;
    left: 50%; transform: translate(-50%, -50%);}
    .done .title {text-decoration: line-through; opacity: 0.6;}

    .content {font-size: 14px; color: var(--sub); line-height: 1.6;
    margin: 7px 0;}
    .content a {color: #3498db; text-decoration: underline;}

    .tags {display: flex; gap: 7px; flex-wrap: wrap; margin-top: 9px;
    font-size: 11.5px;}
    .tag {padding: 4px 9px; border-radius: 5px;}
    .tag.pass {background: #e8f5e9; color: #1a7431;}
    .tag.save {background: #f0f8ff; color: #0066cc; font-weight: 700;}
    .tag.money {background: #fff9c4; color: #f39c12; font-weight: 700;}

    .map {background: #3498db;
    color: white; padding: 5px 9px; border-radius: 5px; font-size: 10.5px; cursor: pointer;
    border: none;}

    /* Footer */
    footer {
        text-align: center;
        padding: 40px 20px;
        font-size: 13px;
        color: var(--sub);
        background: var(--bg);
        width: 100%;
        border-top: 1px solid rgba(0,0,0,0.05);
        margin-top: 40px;
    }
    footer p {
        margin: 8px 0;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
    }
    footer a {
        color: var(--primary);
        text-decoration: none;
        font-weight: bold;
        margin: 0 4px;
    }
    footer a:hover {
        text-decoration: underline;
    }
</style>
</head> <body>

<div class="pass-bar" id="pass-bar"></div>

<div class="fab" id="backToTop" onclick="window.scrollTo({top:0,behavior:'smooth'})">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 19V5M5 12l7-7 7 7"/></svg>
</div>

<div id="vjw-modal" class="modal" onclick="toggleVjwModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
        <span class="close" onclick="toggleVjwModal()">Ã—</span>
        <h3>å…¥å¢ƒ QR Code</h3>
        <img id="vjw-img" src="" alt="VJW QR">
        <p style="margin-top:10px;color:var(--sub)">è«‹æˆªåœ–ä¿å­˜ä»¥å‚™ä¸æ™‚ä¹‹éœ€</p>
    </div>
</div>

<div id="flight-modal" class="modal" onclick="closeAllModals()">
    <div class="modal-content" onclick="event.stopPropagation()">
        <span class="close" onclick="closeAllModals()">Ã—</span>
        <h3>èˆªç­è³‡è¨Š</h3>
        <div id="flight-info" style="white-space: pre-wrap; margin-top: 15px; text-align: left; line-height: 1.6;"></div>
    </div>
</div>

<div id="modal" class="modal" onclick="closeAllModals()">
    <div class="modal-content" onclick="event.stopPropagation()">
        <span class="close" onclick="closeAllModals()">Ã—</span>
        <h3 id="modal-title" style="margin-bottom:12px;color:var(--primary)"></h3>
        <p id="modal-info" style="text-align:left;margin-bottom:12px;"></p>
        <p id="modal-benefits" style="color:#d35400;font-weight:bold;font-size:13px;background:#fff3e0;padding:8px;border-radius:8px;"></p>
    </div>
</div>

<header>
    <h1 id="main-title">è¼‰å…¥ä¸­...</h1>
    <div class="subtitle" id="sub-title"></div>
</header>

<div class="container" id="timeline"></div>

<footer id="footer"></footer>

<script>
    const tripData = {
      'title': '2026 é¦™æ¸¯-æ¾³é–€ æ‘˜æ˜Ÿé£Ÿæ—… (å¤©æ°£å„ªåŒ–ç‰ˆ)',
      'subtitle': '2/6 æ°£æº«15-19Â°C åæ¶¼å¾®é›¨ï¼Œè«‹å¸¶è–„å¤–å¥—',
      'passes': {
        'octopus': {
          'tag': 'å…«é”é€š<br>å…¨æ¸¯é€š',
          'title': 'å…«é”é€šå¡ (Octopus)',
          'info': 'é¦™æ¸¯å¿…å‚™äº¤é€šå¡ï¼Œå¯ç”¨æ–¼åœ°éµã€å·´å£«ã€å®å®è»Šã€å¤©æ˜Ÿå°è¼ªåŠä¾¿åˆ©å•†åº—ä»˜æ¬¾ã€‚',
          'benefits': 'ä¾¿åˆ©å•†åº—ã€è‡ªå‹•è²©è³£æ©Ÿçš†å¯ä½¿ç”¨'
        },
        'weather': {
          'tag': 'å¤©æ°£é å ±<br>15-19Â°C',
          'title': 'æ—…é€”å¤©æ°£æç¤º (2/6-2/10)',
          'info': 'æ°£æº«èˆ’é©(15-19Â°C)ï¼Œå¤šé›²å¶æœ‰å¾®é›¨ã€‚<br>D2(å…­) å¤ªå¹³å±±å¯èƒ½æœ‰éœ§ï¼Œå»ºè­°ä¸‹åˆå‰å¾€ã€‚<br>D4(ä¸€) æ¾³é–€å¤©æ°£ç©©å®šï¼Œé©åˆæ­¥è¡Œã€‚',
          'benefits': 'å»ºè­°ç©¿è‘—ï¼šé•·è¢–+è–„é˜²é¢¨å¤–å¥—'
        },
        'macau_ferry': {
          'tag': 'æ¾³é–€èˆ¹ç¥¨<br>ä¸Šç’°å‡ºç™¼',
          'title': 'å™´å°„é£›èˆª / é‡‘å…‰é£›èˆª',
          'info': 'ä¸Šç’°æ¸¯æ¾³ç¢¼é ­ â†” æ¾³é–€å¤–æ¸¯/æ°¹ä»”å®¢é‹ç¢¼é ­ã€‚<br>å–®ç¨‹ç´„ HK$160-175ï¼Œèˆªç¨‹ç´„ 55 åˆ†é˜ã€‚',
          'benefits': 'D4 é€±ä¸€å‡ºç™¼é¿é–‹äººæ½®'
        }
      },
      'vjw': {
        'enabled': false
      },
      'emergency': {
        'title': 'ç·Šæ€¥è¯çµ¡ï¼ˆé¦™æ¸¯/æ¾³é–€ï¼‰',
        'info': 'é¦™æ¸¯å ±è­¦/ç«è­¦/æ€¥æ•‘ï¼š999<br>æ¾³é–€å ±è­¦/ç«è­¦/æ€¥æ•‘ï¼š999<br>å°åŒ—é§é¦™æ¸¯è¾¦äº‹è™•ï¼š+852-2525-8316<br>ä¿¡ç”¨å¡æ›å¤±ï¼š<br>åœ‹æ³°ä¸–è¯ï¼š+886-2-8073-1515<br>å°æ–°ï¼š+886-2-2655-3355'
      },
      'flight': {
        'enabled': true,
        'info': 'å»ç¨‹ BR871 (EVA Air)\n2/6 16:35 TPE æ¡ƒåœ’ T2 â†’ 18:25 HKG é¦™æ¸¯ T1\n\nå›ç¨‹ BR810 (EVA Air)\n2/10 21:50 HKG é¦™æ¸¯ T1 â†’ 23:35 TPE æ¡ƒåœ’ T2'
      },
      'footer': {
        'enabled': true,
        'text': "<p>Â© 2026 Created by <a href='[https://www.instagram.com/tsaibigbrother/](https://www.instagram.com/tsaibigbrother/)' target='_blank'>TsaiBigBrother è”¡å¤§å“¥</a></p><p>åƒè€ƒä¾†æºï¼š<a href='#' target='_blank'>é¦™æ¸¯å¤©æ–‡å° / æ¾³é–€æ—…éŠå±€</a></p><p>æœ¬è¡Œç¨‹ç”± AI è¼”åŠ©è¦åŠƒä¸¦æ¡ç”¨ <b>è”¡å¤§å“¥æ—…éŠæ¨¡æ¿</b> è£½ä½œ</p>"
      },
      'days': [
        {
          'd': 'D1', 'date': '2/6ï¼ˆäº”ï¼‰', 'title': 'æŠµé”é¦™æ¸¯ ç£ä»”ç‡’è‡˜',
          'spots': [
            { 't': '16:35', 'title': 'TPE èµ·é£› BR871', 'c': 'é è¨ˆ 18:25 æŠµé”é¦™æ¸¯èµ¤é±²è§’æ©Ÿå ´', 'lat': 25.0797, 'lng': 121.2342 },
            { 't': '19:00', 'title': 'æ©Ÿå ´å¿«ç·š â†’ é¦™æ¸¯ç«™', 'c': 'æ°£æº«ç´„17Â°Cï¼Œå¾®æ¶¼ã€‚<br><b onclick="closeAllModals();document.getElementById(\'flight-modal\').style.display=\'flex\'">é»é€™è£¡æŸ¥çœ‹ç­æ©Ÿè©³æƒ…</b>', 'lat': 22.3159, 'lng': 113.9365 },
            { 't': '20:00', 'title': 'å…¥ä½ å…­åœ‹é…’åº— (Gloucester Luk Kwok)', 'c': 'ç£ä»”å‘Šå£«æ‰“é“72è™Ÿï¼Œè¿‘æ¸¯éµç£ä»”ç«™', 'stay': true, 'lat': 22.2783, 'lng': 114.1730 },
            { 't': '20:45', 'title': 'å†èˆˆç‡’è‡˜é£¯åº— (æˆ–è¯æ˜Ÿå†°å®¤)', 'c': 'æ™šé¤å»ºè­°ã€‚è‹¥éœ€å°‘é‡ç¾é‡‘ï¼Œå¯å…ˆåœ¨æ©Ÿå ´æˆ–é…’åº—é™„è¿‘ ATM æé ˜ã€‚', 'lat': 22.2785, 'lng': 114.1764 }
          ]
        },
        {
          'd': 'D2', 'date': '2/7ï¼ˆå…­ï¼‰', 'title': 'ä¸Šç’°æ›åŒ¯ + å¤ªå¹³å±±å¤œæ™¯',
          'spots': [
            { 't': '09:00', 'title': 'Bakehouse ç£ä»”åº—', 'c': 'æ—©é¤ï¼šå¿…åƒé…¸ç¨®è›‹å¡” (Sourdough Egg Tart)', 'lat': 22.2773, 'lng': 114.1718 },
            { 't': '10:00', 'title': 'ä¸Šç’° ç‰›è¨˜æ‰¾æ›åº— (æ›éŒ¢)', 'c': '<b>æœ€å„ªåŒ¯ç‡æ¨è–¦ï¼</b><br>é€±å…­ç‡Ÿæ¥­è‡³13:00ï¼Œè«‹å‹™å¿…ä¸Šåˆå‰å¾€ã€‚<br>åœ°å€ï¼šä¸Šç’°æ€¥åº‡åˆ©è¡—1è™Ÿ', 'lat': 22.2867, 'lng': 114.1513, 'type': 'exchange', 'pass': 'HKD ç¾é‡‘', 'save': 200 },
            { 't': '10:30', 'title': 'æª¸æª¬ç‹ + æ›²å¥‡å››é‡å¥', 'c': 'ä¸Šç’°æ°¸å‰è¡—è²·ä¼´æ‰‹ç¦® (ç”˜è‰æª¸æª¬)ï¼Œå‰›å¥½åœ¨æ›éŒ¢æ‰€é™„è¿‘', 'lat': 22.2855, 'lng': 114.1534 },
            { 't': '12:00', 'title': 'ä¹è¨˜ç‰›è…© / å‹é¦™åœ’', 'c': 'ä¸­ç’°åˆé¤ï¼Œå‹é¦™åœ’å¤§æ’æª” (è‹¥ä¸‹é›¨æ”¹ä¹è¨˜)', 'lat': 22.2840, 'lng': 114.1524 },
            { 't': '16:30', 'title': 'å¤ªå¹³å±±é ‚ çºœè»Š/å·´å£«', 'c': '<b>å¤©æ°£æ³¨æ„ï¼š</b>è‹¥å±±é ‚é›²å±¤å¤ªåšï¼Œæ”¹ç‚ºç¶­å¤šåˆ©äºæ¸¯é‚Šæ•£æ­¥ã€‚<br>æ­çºœè»Šä¸Šå±±ï¼Œæ¬£è³ç™¾è¬å¤œæ™¯', 'lat': 22.2777, 'lng': 114.1592 },
            { 't': '20:00', 'title': 'å¤è¨˜ç…²ä»”å°èœ', 'c': 'è¥¿ç‡Ÿç›¤ååº—ï¼Œç‚­çˆç…²ä»”é£¯ (äººå¤šéœ€æ’éšŠ)', 'lat': 22.2866, 'lng': 114.1416 }
          ]
        },
        {
          'd': 'D3', 'date': '2/8ï¼ˆæ—¥ï¼‰', 'title': 'æ²™ç”°è³½é¦¬ èˆ‡ æ‡·èˆŠä¹é¾',
          'spots': [
            { 't': '09:30', 'title': 'æ¾³æ´²ç‰›å¥¶å…¬å¸', 'c': 'ä½æ•¦æ—©é¤ï¼šç‚’è›‹å¤šå£«ã€ç‡‰å¥¶', 'lat': 22.3044, 'lng': 114.1706 },
            { 't': '12:00', 'title': 'æ²™ç”°é¦¬å ´ è³½é¦¬é«”é©—', 'c': '<b>é€±æ—¥è³½äº‹æ—¥</b>ï¼šæ­æ±éµç·šè‡³é¦¬å ´ç«™ã€‚<br>æˆ¶å¤–æ´»å‹•ï¼Œä»Šæ—¥é™é›¨æ©Ÿç‡ä½ï¼Œé©åˆè§€è³½ã€‚', 'lat': 22.4010, 'lng': 114.2050 },
            { 't': '16:00', 'title': 'æ·±æ°´åŸ— åˆç›Šæ³°å°é£Ÿ', 'c': 'æ»‘æºœè…¸ç²‰ï¼Œé«”é©—åœ°é“è€é¦™æ¸¯', 'lat': 22.3308, 'lng': 114.1624 },
            { 't': '17:30', 'title': 'å˜‰å¤šå¨œéºµåŒ…åº—', 'c': 'æ²¹éº»åœ°ç¢§è¡—ï¼Œæ³•å¼å¸ƒç”¸éºµåŒ… (å¿…è²·)', 'lat': 22.3134, 'lng': 114.1704 },
            { 't': '19:00', 'title': 'æ—ºè§’æƒè¡— + ä½³ä½³ç”œå“', 'c': 'è‚¥å§å°é£Ÿåº—ã€é€šé”é£Ÿåº—ã€ä½³ä½³ç”œå“ (èŠéº»ç³Š)', 'lat': 22.3056, 'lng': 114.1697 }
          ]
        },
        {
          'd': 'D4', 'date': '2/9ï¼ˆä¸€ï¼‰', 'title': 'æ¾³é–€ä¸€æ—¥éŠ (å…è²»æ¥é§æ”»ç•¥)',
          'spots': [
            { 't': '09:00', 'title': 'ä¸Šç’°æ¸¯æ¾³ç¢¼é ­ â†’ æ¾³é–€å¤–æ¸¯', 'c': 'æ­å™´å°„é£›èˆªï¼Œç´„60åˆ†æŠµé”æ¾³é–€å¤–æ¸¯ç¢¼é ­ã€‚<br><b>é¿é–‹é€±æœ«äººæ½®ï¼Œé€šé—œé †æš¢ã€‚</b>', 'pass': 'macau_ferry', 'lat': 22.2882, 'lng': 114.1523 },
            { 't': '10:30', 'title': 'æ¥é§è»Šï¼šå¤–æ¸¯ â†’ æ–°è‘¡äº¬/è‘¡äº¬', 'c': '<b>çœéŒ¢æ”»ç•¥ï¼š</b>å‡ºç¢¼é ­æ­ä¹˜ã€Œæ–°è‘¡äº¬/è‘¡äº¬ã€å…è²»ç™¼è²¡è»Šã€‚<br>ä¸‹è»Šå¾Œæ­¥è¡Œè‡³è­°äº‹äº­å‰åœ°ã€‚', 'pass': 'å…è²»æ¥é§', 'lat': 22.1897, 'lng': 113.5444 },
            { 't': '11:00', 'title': 'å¤§ä¸‰å·´ç‰ŒåŠ + æˆ€æ„›å··', 'c': 'è­°äº‹äº­å‰åœ° â†’ ç«ç‘°å ‚ â†’ å¤§ä¸‰å·´ã€‚<br>æ²¿é€”è©¦åƒè‚‰ä¹¾ã€æä»é¤…ã€‚', 'lat': 22.1976, 'lng': 113.5421 },
            { 't': '13:00', 'title': 'æ­¥è¡Œ â†’ æ˜Ÿéš›é…’åº—/æ°¸åˆ©', 'c': 'å¾å¤§ä¸‰å·´èµ°å›è‘¡äº¬é™„è¿‘ã€‚<br>å»ºè­°èµ°åˆ°ã€Œæ˜Ÿéš›é…’åº— (Starworld)ã€', 'lat': 22.1905, 'lng': 113.5460 },
            { 't': '13:30', 'title': 'æ¥é§è»Šï¼šæ˜Ÿéš› â†’ éŠ€æ²³/å¨å°¼æ–¯äºº', 'c': '<b>è·¨å³¶ç§»å‹•ï¼š</b>æ­æ˜Ÿéš›é…’åº—æ¥é§è»Šå¾€ã€Œæ¾³é–€éŠ€æ²³ã€ã€‚<br>æŠµé”è·¯æ°¹åŸ (Cotai) å€åŸŸã€‚', 'pass': 'å…è²»æ¥é§', 'lat': 22.1495, 'lng': 113.5539 },
            { 't': '15:00', 'title': 'å¨å°¼æ–¯äºº + å€«æ•¦äºº + å·´é»äºº', 'c': 'æ­¥è¡Œåƒè§€ä¸‰å¡”ï¼šå¤§ç¬¨é˜ã€è‰¾è²çˆ¾éµå¡”ã€é‹æ²³ã€‚<br>å®‰å¾·é­¯è›‹å¡”(å¨å°¼æ–¯äººåº—)ä¸‹åˆèŒ¶ã€‚', 'lat': 22.1468, 'lng': 113.5650 },
            { 't': '18:30', 'title': 'æ¥é§è»Šï¼šå¨å°¼æ–¯äºº â†’ æ°¹ä»”ç¢¼é ­', 'c': 'æ­è¥¿ç¿¼å¤§å ‚æ¥é§è»Šå‰å¾€ã€Œæ°¹ä»”å®¢é‹ç¢¼é ­ã€ã€‚', 'pass': 'å…è²»æ¥é§', 'lat': 22.1614, 'lng': 113.5750 },
            { 't': '19:30', 'title': 'æ°¹ä»”ç¢¼é ­ â†’ ä¸Šç’°', 'c': 'æ­é‡‘å…‰é£›èˆªè¿”å›é¦™æ¸¯ã€‚æ™šé¤åƒç”˜ç‰Œç‡’éµ(å¤–å¸¶)æˆ–ä¸€è˜­ã€‚', 'pass': 'macau_ferry', 'lat': 22.2882, 'lng': 114.1523 }
          ]
        },
        {
          'd': 'D5', 'date': '2/10ï¼ˆäºŒï¼‰', 'title': 'æ‡·èˆŠé£²èŒ¶ æœ€å¾Œè¡åˆº',
          'spots': [
            { 't': '09:00', 'title': 'å…­å®‰å±… (è“®é¦™å±…)', 'c': 'ä¸Šç’°æ—©èŒ¶ï¼Œé«”é©—å‚³çµ±æ¨è»Šä»”é»å¿ƒ', 'lat': 22.2872, 'lng': 114.1485 },
            { 't': '11:00', 'title': 'çå¦®æ›²å¥‡ Jenny Bakery', 'c': 'ä¸Šç’°åº—è²·å°ç†Šé¤…ä¹¾ (æ—©å»é¿é–‹æ’éšŠ)', 'lat': 22.2838, 'lng': 114.1530 },
            { 't': '13:00', 'title': 'ç¶­å¤šåˆ©äºæ¸¯ æµ·å‚æ•£æ­¥', 'c': '<b>å¤©æ°£é å ±ï¼š</b>19Â°C èˆ’é©ï¼Œé©åˆæœ€å¾Œæ‹ç…§ã€‚<br>å¯æ­å¤©æ˜Ÿå°è¼ªéŠæ¸¯ã€‚', 'lat': 22.2936, 'lng': 114.1718 },
            { 't': '15:30', 'title': 'è¿”å›é£¯åº—æ‹¿è¡Œæ â†’ æ©Ÿå ´', 'c': 'é è¨ˆ 16:30 å‡ºç™¼å‰å¾€æ©Ÿå ´ã€‚<br>é€€å…«é”é€šã€é€›æ©Ÿå ´å…ç¨…åº—ã€‚', 'lat': 22.2783, 'lng': 114.1730 },
            { 't': '21:50', 'title': 'BR810 èµ·é£› HKG â†’ TPE', 'c': '<b onclick="closeAllModals();document.getElementById(\'flight-modal\').style.display=\'flex\'">é»é€™è£¡æŸ¥çœ‹ç­æ©Ÿè©³æƒ…</b>', 'lat': 22.3080, 'lng': 113.9185 }
          ]
        }
      ]
    };

    // DOM Elements
    const timeline = document.getElementById('timeline');
    const passBar = document.getElementById('pass-bar');
    const fab = document.getElementById('backToTop');
    const modal = document.getElementById('modal');
    const vjwModal = document.getElementById('vjw-modal');

    // Close all modals
    function closeAllModals() {
        modal.style.display = 'none';
        vjwModal.style.display = 'none';
        document.getElementById('flight-modal').style.display = 'none';
        document.querySelectorAll('.day-group').forEach(d => d.classList.remove('active'));
    }

    // VJW Toggle
    function toggleVjwModal() {
        if (vjwModal.style.display === 'flex') {
            vjwModal.style.display = 'none';
        } else {
            vjwModal.style.display = 'flex';
        }
    }

    // Single Expansion Logic
    function toggleDay(e) {
        const current = e.currentTarget.parentElement;
        const isActive = current.classList.contains('active');
        
        // Close all
        document.querySelectorAll('.day-group').forEach(d => d.classList.remove('active'));
        
        // Toggle current
        if (!isActive) {
            current.classList.add('active');
        }
    }

    // Open Info Modal
    function openModal(e) {
        e.stopPropagation();
        const key = e.currentTarget.dataset.modal;
        let title = '', info = '', benefits = '';

        if (key === 'emergency' && tripData.emergency) {
            title = tripData.emergency.title;
            info = tripData.emergency.info;
        } else if (tripData.passes[key]) {
            const p = tripData.passes[key];
            title = p.title;
            info = p.info;
            benefits = p.benefits;
        } else {
            return;
        }

        document.getElementById('modal-title').textContent = title;
        document.getElementById('modal-info').innerHTML = info;
        document.getElementById('modal-benefits').textContent = benefits || '';
        document.getElementById('modal-benefits').style.display = benefits ? 'block' : 'none';
        
        closeAllModals(); // Close others/accordions
        modal.style.display = 'flex';
    }

    // Open Map
    function openMap(lat, lng, name) {
        // Check keywords for suffix
        const suffix = /ç«™|æ©Ÿå ´|ç¥ç¤¾|å¯º|å¸‚|å¸‚å ´|æ©‹|åŸ|æ¹–|å²³|å®®|é…’åº—|é£¯åº—|ç¢¼é ­/i.test(name) ? '' : ' é¦™æ¸¯';
        const query = name + suffix;
        const url = `https://www.google.com/maps/search/?api=1&query=$?q=${encodeURIComponent(query)}&ll=${lat},${lng}`;
        window.open(url, '_blank');
    }

    // Render Page
    function render() {
        // Header
        document.getElementById('main-title').textContent = tripData.title;
        document.getElementById('sub-title').textContent = tripData.subtitle;
        document.title = tripData.title;

        // Passes
        let passHtml = '';
        for (const [key, p] of Object.entries(tripData.passes)) {
            passHtml += `<div class="pass-tag ${key}" data-modal="${key}">${p.tag}</div>`;
        }
        // VJW
        if (tripData.vjw && tripData.vjw.enabled) {
            passHtml += `<div class="pass-tag vjw" onclick="toggleVjwModal()">å…¥å¢ƒ QR<br>VJW</div>`;
            document.getElementById('vjw-img').src = tripData.vjw.image;
        }
        // Emergency
        if (tripData.emergency) {
            passHtml += `<div class="pass-tag emergency" data-modal="emergency">ç·Šæ€¥<br>æ±‚åŠ©</div>`;
        }
        passBar.innerHTML = passHtml;

        // Flight Info
        if (tripData.flight && tripData.flight.enabled) {
            document.getElementById('flight-info').textContent = tripData.flight.info;
        }

        // Timeline
        let html = '';
        tripData.days.forEach((day, index) => {
            html += `
            <div class="day-group ${index === 0 ? 'active' : ''}">
                <div class="day-header" onclick="toggleDay(event)">
                    <div>
                        <div class="day-title">${day.d} ${day.title}</div>
                        <div style="font-size:12px;color:var(--sub)">${day.date}</div>
                    </div>
                    <div class="toggle">â–¼</div>
                </div>
                <div class="spots">
            `;
            
            day.spots.forEach(s => {
                let tags = '';
                if (s.pass) {
                    if (s.cost && s.save) {
                        tags += `<span class="tag pass">${s.pass} æ¶µè“‹ <s>Â¥${s.cost}</s></span> <span class="tag save">çœ Â¥${s.save}</span>`;
                    } else {
                        if (s.type === 'exchange') {
                            tags += `<span class="tag money">ğŸ’° åŒ¯ç‡å„ªé¸</span> <span class="tag save">é ä¼°çœ HK$${s.save}</span>`;
                        } else {
                            tags += `<span class="tag pass">${s.pass}</span>`;
                        }
                    }
                }
                
                let mapBtn = '';
                if (s.lat && s.lng) {
                    mapBtn = `<button class="map" onclick="event.stopPropagation();openMap(${s.lat},${s.lng},'${s.title.replace(/'/g,"\\'")}')">åœ°åœ–</button>`;
                }

                const typeClass = s.type ? s.type : '';
                
                html += `
                <div class="spot ${typeClass}" onclick="this.classList.toggle('done')">
                    <div class="time">${s.t}</div>
                    <div class="title">
                        <div style="display:flex;align-items:center;">
                            <div class="check"></div>
                            <span>${s.title}</span>
                        </div>
                        ${mapBtn}
                    </div>
                    <div class="content">${s.c}</div>
                    <div class="tags">${tags}</div>
                </div>
                `;
            });
            
            html += `</div></div>`;
        });
        timeline.innerHTML = html;

        // Footer
        if (tripData.footer && tripData.footer.enabled) {
            document.getElementById('footer').innerHTML = tripData.footer.text;
        }

        // Bind Events
        document.querySelectorAll('.pass-tag[data-modal]').forEach(el => {
            el.addEventListener('click', openModal);
        });
    }

    // Scroll FAB
    window.addEventListener('scroll', () => {
        if (window.scrollY > 300) {
            fab.classList.add('show');
        } else {
            fab.classList.remove('show');
        }
    });

    // Init
    render();

</script>
</body> </html>